<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Architecture Simulator - Test</title>
    
    <!-- External Dependencies -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Local Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-left">
            <h1>
                <i class="fas fa-sitemap"></i>
                Architecture Simulator
            </h1>
            <p class="subtitle">Solution Architect Tool</p>
        </div>
        
        <div class="header-controls">
            <div class="quick-actions">
                <button class="quick-btn quick-btn-primary" onclick="simulateDataFlow()">
                    <i class="fas fa-play"></i>
                    Simulate
                </button>
                <button class="quick-btn quick-btn-success" onclick="exportArchitecture()">
                    <i class="fas fa-download"></i>
                    Export
                </button>
                <button class="quick-btn quick-btn-warning" onclick="togglePresentation()">
                    <i class="fas fa-presentation"></i>
                    Present
                </button>
                <button class="quick-btn quick-btn-secondary" onclick="toggleHandMode()">
                    <i class="fas fa-hand-paper"></i>
                    Hand
                </button>
                <button class="quick-btn" onclick="toggleArrowStyling()">
                    <i class="fas fa-palette"></i>
                    Style
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h2 class="sidebar-title">
                    <i class="fas fa-cube"></i>
                    Component Library
                </h2>
            </div>
            
            <div class="sidebar-content">
                <!-- Component Library Section -->
                <div class="section">
                    <div class="section-header">
                        <h3 class="section-title">Component Library</h3>
                        <span class="section-count" id="componentCount">0</span>
                    </div>
                    
                    <div class="search-box" id="componentSearch" placeholder="Search components..."></div>
                    
                    <div class="component-library" id="componentLibrary">
                        <!-- Cloud Providers -->
                        <div class="component-item" draggable="true" data-type="cloud" data-name="AWS EC2" data-cost="50" data-description="Elastic Compute Cloud">
                            <i class="fab fa-aws"></i>
                            <span>EC2</span>
                        </div>
                        
                        <div class="component-item" draggable="true" data-type="cloud" data-name="AWS RDS" data-cost="80" data-description="Relational Database Service">
                            <i class="fas fa-database"></i>
                            <span>RDS</span>
                        </div>
                        
                        <div class="component-item" draggable="true" data-type="cloud" data-name="AWS S3" data-cost="20" data-description="Simple Storage Service">
                            <i class="fas fa-cloud"></i>
                            <span>S3</span>
                        </div>
                        
                        <div class="component-item" draggable="true" data-type="cloud" data-name="AWS Lambda" data-cost="15" data-description="Serverless Compute">
                            <i class="fas fa-bolt"></i>
                            <span>Lambda</span>
                        </div>
                        
                        <div class="component-item" draggable="true" data-type="cloud" data-name="API Gateway" data-cost="25" data-description="API Management">
                            <i class="fas fa-network-wired"></i>
                            <span>API Gateway</span>
                        </div>
                        
                        <div class="component-item" draggable="true" data-type="cloud" data-name="Load Balancer" data-cost="30" data-description="Traffic Distribution">
                            <i class="fas fa-balance-scale"></i>
                            <span>Load Balancer</span>
                        </div>
                        
                        <!-- Microservices -->
                        <div class="component-item" draggable="true" data-type="microservice" data-name="User Service" data-cost="40" data-description="User Management">
                            <i class="fas fa-users"></i>
                            <span>User Service</span>
                        </div>
                        
                        <div class="component-item" draggable="true" data-type="microservice" data-name="Payment Service" data-cost="60" data-description="Payment Processing">
                            <i class="fas fa-credit-card"></i>
                            <span>Payment Service</span>
                        </div>
                        
                        <div class="component-item" draggable="true" data-type="microservice" data-name="Order Service" data-cost="45" data-description="Order Management">
                            <i class="fas fa-shopping-cart"></i>
                            <span>Order Service</span>
                        </div>
                        
                        <div class="component-item" draggable="true" data-type="microservice" data-name="Notification Service" data-cost="35" data-description="Notifications">
                            <i class="fas fa-bell"></i>
                            <span>Notification Service</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Workspace -->
        <main class="workspace">
            <!-- Canvas -->
            <div class="canvas" id="canvas">
                <div class="grid-overlay"></div>
                <div class="canvas-instruction">
                    <i class="fas fa-mouse-pointer"></i>
                    <p>Drag components from the sidebar to start building your architecture</p>
                    <span>Click components to connect them</span>
                </div>
                
                <!-- Zoom Controls -->
                <div class="zoom-controls">
                    <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">
                        <i class="fas fa-plus"></i>
                    </button>
                    <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button class="zoom-btn" onclick="resetZoom()" title="Reset Zoom">
                        <i class="fas fa-expand-arrows-alt"></i>
                    </button>
                    <button class="zoom-btn" onclick="fitToScreen()" title="Fit to Screen">
                        <i class="fas fa-compress-arrows-alt"></i>
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Connection Info Modal -->
    <div class="connection-info" id="connectionInfo">
        <h3>Connection Details</h3>
        <form class="connection-form" id="connectionForm">
            <input type="text" id="connectionName" placeholder="Connection Name" required>
            <select id="connectionType">
                <option value="data">Data Flow</option>
                <option value="api">API Call</option>
                <option value="event">Event</option>
                <option value="sync">Synchronization</option>
            </select>
            <textarea id="connectionDescription" placeholder="Description" rows="3"></textarea>
            <div class="connection-buttons">
                <button type="button" class="cancel-btn" onclick="closeConnectionInfo()">Cancel</button>
                <button type="submit" class="save-btn">Save Connection</button>
            </div>
        </form>
    </div>

    <!-- Arrow Styling Panel -->
    <div class="arrow-styling-panel" id="arrowStylingPanel">
        <h3>Arrow Styling</h3>
        
        <div class="styling-section">
            <h4>Lebar Guratan</h4>
            <div class="styling-options">
                <div class="styling-option stroke-width-option thin" data-width="1">1</div>
                <div class="styling-option stroke-width-option medium active" data-width="3">3</div>
                <div class="styling-option stroke-width-option thick" data-width="5">5</div>
            </div>
        </div>

        <div class="styling-section">
            <h4>Gaya Guratan</h4>
            <div class="styling-options">
                <div class="styling-option stroke-style-option solid active" data-style="solid">—</div>
                <div class="styling-option stroke-style-option dashed" data-style="dashed">- -</div>
                <div class="styling-option stroke-style-option dotted" data-style="dotted">· ·</div>
            </div>
        </div>

        <div class="styling-section">
            <h4>Kecerobohan</h4>
            <div class="styling-options">
                <div class="styling-option roughness-option low active" data-roughness="0">Low</div>
                <div class="styling-option roughness-option medium" data-roughness="1">Med</div>
                <div class="styling-option roughness-option high" data-roughness="2">High</div>
            </div>
        </div>

        <div class="styling-section">
            <h4>Arrow Type</h4>
            <div class="styling-options">
                <div class="styling-option arrow-type-option straight active" data-type="straight">Straight</div>
                <div class="styling-option arrow-type-option curved" data-type="curved">Curved</div>
                <div class="styling-option arrow-type-option right-angled" data-type="right-angled">Right Angle</div>
            </div>
        </div>

        <div class="styling-section">
            <h4>Mata Panah</h4>
            <div class="styling-options">
                <div class="styling-option arrowhead-option triangle active" data-arrowhead="triangle">Triangle</div>
                <div class="styling-option arrowhead-option circle" data-arrowhead="circle">Circle</div>
                <div class="styling-option arrowhead-option diamond" data-arrowhead="diamond">Diamond</div>
            </div>
        </div>

        <div id="connectionEditorActions" style="display: none;">
            <div class="styling-options">
                <button class="styling-option" onclick="resetToGlobalStyle()" style="background: #6b7280; color: white;">
                    Reset ke Global
                </button>
                <button class="styling-option" onclick="closeConnectionEditor()" style="background: #ef4444; color: white;">
                    Tutup Editor
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Arrow Style Panel (Excalidraw style) -->
    <div class="floating-arrow-panel" id="floatingArrowPanel">
        <h4>Style</h4>
        
        <div class="styling-section">
            <h4>Width</h4>
            <div class="styling-options">
                <div class="styling-option stroke-width-option thin" data-width="1">1</div>
                <div class="styling-option stroke-width-option medium active" data-width="3">3</div>
                <div class="styling-option stroke-width-option thick" data-width="5">5</div>
            </div>
        </div>

        <div class="styling-section">
            <h4>Style</h4>
            <div class="styling-options">
                <div class="styling-option stroke-style-option solid active" data-style="solid">—</div>
                <div class="styling-option stroke-style-option dashed" data-style="dashed">- -</div>
                <div class="styling-option stroke-style-option dotted" data-style="dotted">· ·</div>
            </div>
        </div>

        <div class="styling-section">
            <h4>Type</h4>
            <div class="styling-options">
                <div class="styling-option arrow-type-option straight active" data-type="straight">↗</div>
                <div class="styling-option arrow-type-option curved" data-type="curved">⌒</div>
                <div class="styling-option arrow-type-option right-angled" data-type="right-angled">┐</div>
            </div>
        </div>

        <div class="styling-section">
            <h4>Head</h4>
            <div class="styling-options">
                <div class="styling-option arrowhead-option triangle active" data-arrowhead="triangle">▶</div>
                <div class="styling-option arrowhead-option circle" data-arrowhead="circle">●</div>
                <div class="styling-option arrowhead-option diamond" data-arrowhead="diamond">◆</div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script src="simulation.js"></script>
</body>
</html>
